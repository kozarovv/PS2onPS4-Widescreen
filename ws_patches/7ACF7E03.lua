apiRequest(1.0)
local eeObj = getEEObject()
local emuObj = getEmuObject()

local widescreen = function()
--comment=Widescreen hacks by Aced14 (major updates) and No.47 (initial FOV hacks)

--16:9 Widescreen

--Enable Condition
--Condition to only enable these hacks when TMB's ELF file is loaded into memory. Prevents crash in Russian fan translation's ELF launcher.
eeObj.WriteMem32(0x00FFFFFB,0x00100028)

--FMV
--eeObj.WriteMem32(0x001C179C,0x00000000)

--Main Menu
eeObj.WriteMem32(0x004DF5B0,0x43C00000)
eeObj.WriteMem32(0x004DF5D0,0x3FAAAAAB)
eeObj.WriteMem32(0x0019C978,0x0000003B)
eeObj.WriteMem32(0x0019CC84,0x0000003B)
eeObj.WriteMem32(0x004DFB34,0x0000009D)

--1 Player
eeObj.WriteMem32(0x004DEF80,0x43E40000)
eeObj.WriteMem32(0x004DEFA0,0x3F206D39)
eeObj.WriteMem32(0x004F8188,0xC01F1AA0)
eeObj.WriteMem32(0x004F8194,0x40076C8B)
eeObj.WriteMem32(0x001401DC,0x0000004F)
eeObj.WriteMem32(0x0013DE2C,0x00000284)
eeObj.WriteMem32(0x0013E0F0,0x00000235)
eeObj.WriteMem32(0x0013E0F8,0x00000005)

--1 Player - Large Rear View
eeObj.WriteMem32(0x004DF9D0,0x43E40000)
eeObj.WriteMem32(0x004DF9F0,0x3F206D39)
eeObj.WriteMem32(0x004DFA80,0x43E40000)
eeObj.WriteMem32(0x004DFAA0,0x3F206D39)
eeObj.WriteMem32(0x004F8168,0x3E46A7F0)
eeObj.WriteMem32(0x004F817C,0x3ED47AE1)
eeObj.WriteMem32(0x001401C4,0x00000047)
eeObj.WriteMem32(0x0013DDEC,0x0000028C)

--1 Player - Small Rear View
eeObj.WriteMem32(0x004DF920,0x44100000)
eeObj.WriteMem32(0x004DF940,0x3F206D3A)
eeObj.WriteMem32(0x004DF92C,0x000001AC)
eeObj.WriteMem32(0x004DF92E,0x0000000E)
eeObj.WriteMem32(0x004DF930,0x450D0000)
eeObj.WriteMem32(0x004DF934,0x44F6C000)
eeObj.WriteMem32(0x004DF938,0x000008D0)
eeObj.WriteMem32(0x004DF93C,0x000007B6)
eeObj.WriteMem32(0x0013E480,0x00000002)

--2-4 Players - In-Game Loading Bar
eeObj.WriteMem32(0x004DFBE4,0x000000A1)
eeObj.WriteMem32(0x004DFBEC,0x000000F0)

--2 Players - Horizontal Splitscreen
eeObj.WriteMem32(0x004DF030,0x43E40000)
eeObj.WriteMem32(0x004DF050,0x3F206D39)
eeObj.WriteMem32(0x004DF0E0,0x43E40000)
eeObj.WriteMem32(0x004DF100,0x3F206D39)
eeObj.WriteMem32(0x004F81A0,0xC043645A)
eeObj.WriteMem32(0x0013D6E4,0x0000401D)
eeObj.WriteMem32(0x001401F0,0x0000003F)
eeObj.WriteMem32(0x0013DE6C,0x0000028C)

--2 Players - Vertical Splitscreen
eeObj.WriteMem32(0x004DF190,0x43C00000)
eeObj.WriteMem32(0x004DF1B0,0x3F206D3A)
eeObj.WriteMem32(0x004DF240,0x43C00000)
eeObj.WriteMem32(0x004DF260,0x3F206D3A)
eeObj.WriteMem32(0x004F81B4,0xBFCF1AA0)
eeObj.WriteMem32(0x004F81C0,0x3F900000)
eeObj.WriteMem32(0x00140200,0x0000003F)
eeObj.WriteMem32(0x00142A3C,0x00000023)
eeObj.WriteMem32(0x0013DEB4,0x000000A4)
eeObj.WriteMem32(0x00142588,0x000000BB)

--3-4 Players
eeObj.WriteMem32(0x004DF660,0x44040000)
eeObj.WriteMem32(0x004DF680,0x3F206D3A)
eeObj.WriteMem32(0x004DF710,0x44040000)
eeObj.WriteMem32(0x004DF730,0x3F206D3A)
eeObj.WriteMem32(0x004DF7C0,0x44040000)
eeObj.WriteMem32(0x004DF7E0,0x3F206D3A)
eeObj.WriteMem32(0x004DF870,0x44040000)
eeObj.WriteMem32(0x004DF890,0x3F206D3A)
eeObj.WriteMem32(0x004F81C8,0xC006978D)
eeObj.WriteMem32(0x004F81D4,0x3FBDF3B6)
eeObj.WriteMem32(0x0013DAD4,0x00000111)
eeObj.WriteMem32(0x0013DADC,0x00000025)
eeObj.WriteMem32(0x0013DAF0,0x00000111)
eeObj.WriteMem32(0x0013DAF8,0x00000025)
eeObj.WriteMem32(0x0013DB0C,0x0000012D)
eeObj.WriteMem32(0x0013DB10,0x00000010)
eeObj.WriteMem32(0x0013DB14,0x00000008)
eeObj.WriteMem32(0x00142490,0x00000099)
eeObj.WriteMem32(0x001644C0,0x0000019D)
eeObj.WriteMem32(0x001645E8,0x0000019D)
eeObj.WriteMem32(0x001649D4,0x0000019D)

--Moving Enemy Health Bars
eeObj.WriteMem32(0x0013FF4C,0x00000020)
eeObj.WriteMem32(0x0013FF54,0x00000010)

--Moving Enemy Indicator Arrows
eeObj.WriteMem32(0x0013F8FC,0x0000FFF7)
eeObj.WriteMem32(0x0013F924,0x00000009)

--Sprites
eeObj.WriteMem32(0x002334D0,0x43E40000)
--eeObj.WriteMem32(0x00233208,0x43E40000)
--eeObj.WriteMem32(0x00233228,0x43640000)

--Generic Font
eeObj.WriteMem32(0x001C4344,0x00000007)

--Radar - Closest Enemy Names Widths (hudCarWidths)
eeObj.WriteMem32(0x0023C530,0x09070707)
eeObj.WriteMem32(0x0023C534,0x06080808)
eeObj.WriteMem32(0x0023C538,0x09070807)
eeObj.WriteMem32(0x0023C53C,0x08060708)
eeObj.WriteMem32(0x0023C540,0x00000808)

--Radar - Coordinates Positioning
eeObj.WriteMem32(0x001405F4,0x00004134)
eeObj.WriteMem32(0x00140620,0x08081544)
eeObj.WriteMem32(0x00205510,0x3C014170)
eeObj.WriteMem32(0x00205514,0x44812800)
eeObj.WriteMem32(0x00205518,0x0805018A)
eeObj.WriteMem32(0x0020551C,0x46051082)

--Left-Aligned Text Positioning (fontSpritePrintXY)
eeObj.WriteMem32(0x001C44AC,0x08081548)
eeObj.WriteMem32(0x00205520,0x4485F800)
eeObj.WriteMem32(0x00205524,0x4680FFE0)
eeObj.WriteMem32(0x00205528,0x3C0142D5)
eeObj.WriteMem32(0x0020552C,0x34215558)
eeObj.WriteMem32(0x00205530,0x4481F000)
eeObj.WriteMem32(0x00205534,0x461EFFC0)
eeObj.WriteMem32(0x00205538,0x3C013F40)
eeObj.WriteMem32(0x0020553C,0x4481F000)
eeObj.WriteMem32(0x00205540,0x461EFFC2)
eeObj.WriteMem32(0x00205544,0x3C013F00)
eeObj.WriteMem32(0x00205548,0x4481F000)
eeObj.WriteMem32(0x0020554C,0x461EFFC0)
eeObj.WriteMem32(0x00205550,0x4600FFE4)
eeObj.WriteMem32(0x00205554,0x4405F800)
eeObj.WriteMem32(0x00205558,0x0807112D)
eeObj.WriteMem32(0x0020555C,0x00041940)

--Sub Pixel Font Width/Spacing (fontSetCharSizesInSubPixels)
eeObj.WriteMem32(0x001C4704,0x080711CC)
eeObj.WriteMem32(0x001C4730,0x3C013F40)
eeObj.WriteMem32(0x001C4734,0x4481E800)
eeObj.WriteMem32(0x001C4738,0x3C013F00)
eeObj.WriteMem32(0x001C473C,0x4481F000)
eeObj.WriteMem32(0x001C4740,0x4485F800)
eeObj.WriteMem32(0x001C4744,0x4680FFE0)
eeObj.WriteMem32(0x001C4748,0x461DFFC2)
eeObj.WriteMem32(0x001C474C,0x461EFFC0)
eeObj.WriteMem32(0x001C4750,0x4600FFE4)
eeObj.WriteMem32(0x001C4754,0x4405F800)
eeObj.WriteMem32(0x001C4758,0x4487F800)
eeObj.WriteMem32(0x001C475C,0x4680FFE0)
eeObj.WriteMem32(0x001C4760,0x461DFFC2)
eeObj.WriteMem32(0x001C4764,0x461EFFC1)
eeObj.WriteMem32(0x001C4768,0x4600FFE4)
eeObj.WriteMem32(0x001C476C,0x4407F800)
eeObj.WriteMem32(0x001C4770,0x080711C3)
eeObj.WriteMem32(0x001C4774,0x00042140)

--Sub Pixel-Based Text Positioning (fontSetCursorAtSubPixel)
eeObj.WriteMem32(0x001C47BC,0x080711DE)
eeObj.WriteMem32(0x001C4778,0x4485F800)
eeObj.WriteMem32(0x001C477C,0x4680FFE0)
eeObj.WriteMem32(0x001C4780,0x3C0144D5)
eeObj.WriteMem32(0x001C4784,0x34218AAB)
eeObj.WriteMem32(0x001C4788,0x4481F000)
eeObj.WriteMem32(0x001C478C,0x461EFFC0)
eeObj.WriteMem32(0x001C4790,0x3C013F40)
eeObj.WriteMem32(0x001C4794,0x4481F000)
eeObj.WriteMem32(0x001C4798,0x461EFFC2)
eeObj.WriteMem32(0x001C479C,0x3C013F00)
eeObj.WriteMem32(0x001C47A0,0x4481F000)
eeObj.WriteMem32(0x001C47A4,0x461EFFC0)
eeObj.WriteMem32(0x001C47A8,0x4600FFE4)
eeObj.WriteMem32(0x001C47AC,0x4405F800)
eeObj.WriteMem32(0x001C47B0,0x080711F1)
eeObj.WriteMem32(0x001C47B4,0x00042140)
end

emuObj.AddVsyncHook(widescreen)