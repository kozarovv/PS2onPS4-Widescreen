apiRequest(1.0)
local eeObj = getEEObject()
local emuObj = getEmuObject()

local widescreen = function()
--gametitle=Twisted Metal: Black [Preview] (NTSC-U) [SLPS-200] [AF3E4E18]
--comment=Widescreen hacks by Aced14

--16:9 Widescreen

--FMV
--eeObj.WriteMem32(0x001CE61C,0x00000000)

--Main Menu
eeObj.WriteMem32(0x006D11B0,0x43C00000)
eeObj.WriteMem32(0x006D11D0,0x3FAAAAAB)
eeObj.WriteMem32(0x001A87C8,0x0000003B)
eeObj.WriteMem32(0x001A8AD4,0x0000003B)
eeObj.WriteMem32(0x006D1734,0x0000009D)

--1 Player
eeObj.WriteMem32(0x006D0B80,0x43E40000)
eeObj.WriteMem32(0x006D0BA0,0x3F206D39)
eeObj.WriteMem32(0x006EEF28,0xC01F1AA0)
eeObj.WriteMem32(0x006EEF34,0x40076C8B)
eeObj.WriteMem32(0x00144D28,0x0000004F)
eeObj.WriteMem32(0x00142BE0,0x00000284)
eeObj.WriteMem32(0x00142E94,0x00000235)
eeObj.WriteMem32(0x00142E9C,0x00000005)

--1 Player - Large Rear View
eeObj.WriteMem32(0x006D15D0,0x43E40000)
eeObj.WriteMem32(0x006D15F0,0x3F206D39)
eeObj.WriteMem32(0x006D1680,0x43E40000)
eeObj.WriteMem32(0x006D16A0,0x3F206D39)
eeObj.WriteMem32(0x006EEF08,0x3E46A7F0)
eeObj.WriteMem32(0x006EEF1C,0x3ED47AE1)
eeObj.WriteMem32(0x006EEF24,0x3EE66666)
eeObj.WriteMem32(0x00144D10,0x00000047)
eeObj.WriteMem32(0x00142BA0,0x0000028C)
eeObj.WriteMem32(0x00142BA8,0x00000041)

--1 Player - Large Rear View + 2 Players - Horizontal Splitscreen
eeObj.WriteMem32(0x0014746C,0x0000017F)
eeObj.WriteMem32(0x00147474,0x0000000E)

--1 Player - Small Rear View
eeObj.WriteMem32(0x006D1520,0x44100000)
eeObj.WriteMem32(0x006D1540,0x3F206D3A)
eeObj.WriteMem32(0x006D152C,0x000001AC)
eeObj.WriteMem32(0x006D152E,0x0000000E)
eeObj.WriteMem32(0x006D1530,0x450D0000)
eeObj.WriteMem32(0x006D1534,0x44F6C000)
eeObj.WriteMem32(0x006D1538,0x000008D0)
eeObj.WriteMem32(0x006D153C,0x000007B6)
eeObj.WriteMem32(0x00143220,0x00000002)

--2 Players - Horizontal Splitscreen
eeObj.WriteMem32(0x006D0C30,0x43E40000)
eeObj.WriteMem32(0x006D0C50,0x3F206D39)
eeObj.WriteMem32(0x006D0CE0,0x43E40000)
eeObj.WriteMem32(0x006D0D00,0x3F206D39)
eeObj.WriteMem32(0x006EEF40,0xC043645A)
eeObj.WriteMem32(0x00142634,0x0000401D)
eeObj.WriteMem32(0x00144D3C,0x0000003F)
eeObj.WriteMem32(0x00142C20,0x0000028C)

--2 Players - Vertical Splitscreen
eeObj.WriteMem32(0x006D0D90,0x43C00000)
eeObj.WriteMem32(0x006D0DB0,0x3F206D3A)
eeObj.WriteMem32(0x006D0E40,0x43C00000)
eeObj.WriteMem32(0x006D0E60,0x3F206D3A)
eeObj.WriteMem32(0x006EEF54,0xBFCF1AA0)
eeObj.WriteMem32(0x006EEF60,0x3F900000)
eeObj.WriteMem32(0x00144D4C,0x0000003F)
eeObj.WriteMem32(0x00147958,0x00000029)
eeObj.WriteMem32(0x00142C64,0x000000A4)
eeObj.WriteMem32(0x001474BC,0x000000BB)
eeObj.WriteMem32(0x001474C4,0x0000003F)

--3-4 Players
eeObj.WriteMem32(0x006D1260,0x44040000)
eeObj.WriteMem32(0x006D1280,0x3F206D3A)
eeObj.WriteMem32(0x006D1310,0x44040000)
eeObj.WriteMem32(0x006D1330,0x3F206D3A)
eeObj.WriteMem32(0x006D13C0,0x44040000)
eeObj.WriteMem32(0x006D13E0,0x3F206D3A)
eeObj.WriteMem32(0x006D1470,0x44040000)
eeObj.WriteMem32(0x006D1490,0x3F206D3A)
eeObj.WriteMem32(0x006EEF68,0xC006978D)
eeObj.WriteMem32(0x006EEF74,0x3FBDF3B6)
eeObj.WriteMem32(0x001429C0,0x00000111)
eeObj.WriteMem32(0x001429C8,0x00000025)
eeObj.WriteMem32(0x001429DC,0x00000111)
eeObj.WriteMem32(0x001429E4,0x00000025)
eeObj.WriteMem32(0x001429F8,0x0000012D)
eeObj.WriteMem32(0x001429FC,0x00000010)
eeObj.WriteMem32(0x00142A00,0x00000008)
eeObj.WriteMem32(0x00171AD0,0x0000019D)
eeObj.WriteMem32(0x00171AD8,0x0C07459E)
eeObj.WriteMem32(0x00171BC8,0x0000019D)
eeObj.WriteMem32(0x00171BD0,0x0C07459E)
eeObj.WriteMem32(0x00171F9C,0x0000019D)

--Moving Enemy Health Bars
eeObj.WriteMem32(0x00144BF8,0x00000020)
eeObj.WriteMem32(0x00144C00,0x00000010)

--Moving Enemy Indicator Arrows
eeObj.WriteMem32(0x00144694,0x0000FFF7)
eeObj.WriteMem32(0x001446BC,0x00000009)

--Sprites
eeObj.WriteMem32(0x00245DF0,0x43E40000)
--eeObj.WriteMem32(0x00245B28,0x43E40000)
--eeObj.WriteMem32(0x00245B48,0x43640000)

--Generic Font
eeObj.WriteMem32(0x001D14E4,0x00000007)

--Radar - Closest Enemy Names Widths (hudCarWidths)
eeObj.WriteMem32(0x00251288,0x09070707)
eeObj.WriteMem32(0x0025128C,0x06080808)
eeObj.WriteMem32(0x00251290,0x09070807)
eeObj.WriteMem32(0x00251294,0x08060707)
eeObj.WriteMem32(0x00251298,0x00000808)

--Radar - Coordinates Positioning
eeObj.WriteMem32(0x00145154,0x00004134)
eeObj.WriteMem32(0x00145180,0x08086090)
eeObj.WriteMem32(0x00218240,0x3C014170)
eeObj.WriteMem32(0x00218244,0x44812800)
eeObj.WriteMem32(0x00218248,0x08051462)
eeObj.WriteMem32(0x0021824C,0x46051082)

--Left-Aligned Text Positioning (fontSpritePrintXY)
eeObj.WriteMem32(0x001D164C,0x08086094)
eeObj.WriteMem32(0x00218250,0x4485F800)
eeObj.WriteMem32(0x00218254,0x4680FFE0)
eeObj.WriteMem32(0x00218258,0x3C0142D5)
eeObj.WriteMem32(0x0021825C,0x34215558)
eeObj.WriteMem32(0x00218260,0x4481F000)
eeObj.WriteMem32(0x00218264,0x461EFFC0)
eeObj.WriteMem32(0x00218268,0x3C013F40)
eeObj.WriteMem32(0x0021826C,0x4481F000)
eeObj.WriteMem32(0x00218270,0x461EFFC2)
eeObj.WriteMem32(0x00218274,0x3C013F00)
eeObj.WriteMem32(0x00218278,0x4481F000)
eeObj.WriteMem32(0x0021827C,0x461EFFC0)
eeObj.WriteMem32(0x00218280,0x4600FFE4)
eeObj.WriteMem32(0x00218284,0x4405F800)
eeObj.WriteMem32(0x00218288,0x08074595)
eeObj.WriteMem32(0x0021828C,0x00041940)

--Sub Pixel Font Width/Spacing (fontSetCharSizesInSubPixels)
eeObj.WriteMem32(0x001D18A4,0x08074634)
eeObj.WriteMem32(0x001D18D0,0x3C013F40)
eeObj.WriteMem32(0x001D18D4,0x4481E800)
eeObj.WriteMem32(0x001D18D8,0x3C013F00)
eeObj.WriteMem32(0x001D18DC,0x4481F000)
eeObj.WriteMem32(0x001D18E0,0x4485F800)
eeObj.WriteMem32(0x001D18E4,0x4680FFE0)
eeObj.WriteMem32(0x001D18E8,0x461DFFC2)
eeObj.WriteMem32(0x001D18EC,0x461EFFC0)
eeObj.WriteMem32(0x001D18F0,0x4600FFE4)
eeObj.WriteMem32(0x001D18F4,0x4405F800)
eeObj.WriteMem32(0x001D18F8,0x4487F800)
eeObj.WriteMem32(0x001D18FC,0x4680FFE0)
eeObj.WriteMem32(0x001D1900,0x461DFFC2)
eeObj.WriteMem32(0x001D1904,0x461EFFC1)
eeObj.WriteMem32(0x001D1908,0x4600FFE4)
eeObj.WriteMem32(0x001D190C,0x4407F800)
eeObj.WriteMem32(0x001D1910,0x0807462B)
eeObj.WriteMem32(0x001D1914,0x00042140)

--Sub Pixel-Based Text Positioning (fontSetCursorAtSubPixel)
eeObj.WriteMem32(0x001D195C,0x08074646)
eeObj.WriteMem32(0x001D1918,0x4485F800)
eeObj.WriteMem32(0x001D191C,0x4680FFE0)
eeObj.WriteMem32(0x001D1920,0x3C0144D5)
eeObj.WriteMem32(0x001D1924,0x34218AAB)
eeObj.WriteMem32(0x001D1928,0x4481F000)
eeObj.WriteMem32(0x001D192C,0x461EFFC0)
eeObj.WriteMem32(0x001D1930,0x3C013F40)
eeObj.WriteMem32(0x001D1934,0x4481F000)
eeObj.WriteMem32(0x001D1938,0x461EFFC2)
eeObj.WriteMem32(0x001D193C,0x3C013F00)
eeObj.WriteMem32(0x001D1940,0x4481F000)
eeObj.WriteMem32(0x001D1944,0x461EFFC0)
eeObj.WriteMem32(0x001D1948,0x4600FFE4)
eeObj.WriteMem32(0x001D194C,0x4405F800)
eeObj.WriteMem32(0x001D1950,0x08074659)
eeObj.WriteMem32(0x001D1954,0x00042140)

--Tweaks - Table of Contents - Top Page
eeObj.WriteMem32(0x0020A98C,0x00000018)
eeObj.WriteMem32(0x0020A9A8,0x0000FF9E)
eeObj.WriteMem32(0x0020AED8,0x0000FF9A)

--Tweaks - Table of Contents - Active Page
eeObj.WriteMem32(0x0020AA00,0x00000021)
eeObj.WriteMem32(0x0020ABA0,0x0000FF9A)

--Tweaks - Stats
eeObj.WriteMem32(0x001FF0AC,0x2405FF95)

--Tweaks - View FOV
eeObj.WriteMem32(0x002108B0,0x00004140)
eeObj.WriteMem32(0x002108BC,0x00004340)
eeObj.WriteMem32(0x002108C8,0x00004440)
eeObj.WriteMem32(0x002108D4,0x00004307)
end

emuObj.AddVsyncHook(widescreen)