apiRequest(1.0)
local eeObj = getEEObject()
local emuObj = getEmuObject()

local widescreen = function()
--gametitle=Burnout 3 - Takedown (J) (SLPM-65719) 
--comment=Widescreen Hack (16:9) by Aero_ (NTSC-J by Arapapa)



-- FOV (16:9)

eeObj.WriteMem32(0x0068A3CD,byte,01 -- enables widescreen FOV values

--9A 99 99 3F CE CC 4C 3E CD CC 4C 3F C8 CC CC 3D
eeObj.WriteMem32(0x00504F30,0x3FAAAAAB)

--39 8E E3 3F 00 80 0E 43 EF EE 6E 3E 29 5C CF 3F
eeObj.WriteMem32(0x0050514C,0x3FE38E39)

--29 5C CF 3F 39 8E 63 40 CD CC AC 3F
eeObj.WriteMem32(0x00505158,0x3FE38E39)

--39 8E 63 40 CD CC AC 3F AB AA 2A 40
eeObj.WriteMem32(0x0050515C,0x40638E39)




-- HUD (16:9)
--CD CC CC 3A 89 88 08 3B 9A 99 01 C1
eeObj.WriteMem32(0x00505538,0x3A99999A)

--00 00 00 00 00 00 00 00 00 00 80 3F EF EE 6E 3F
eeObj.WriteMem32(0x0068C7B0,0x42A00000)

--00 00 00 00 00 00 00 00 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 00 00 00 00 00 00 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 54 A4 66 00 00 00 00 00 00 00 00 00 54 A4 66 00
eeObj.WriteMem32(0x0068E030,0x42A00000)

--00 00 80 3F 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80 BF 00 00 80 BF 00 00 80 BF 00 00 80 BF 00 00 00 00
eeObj.WriteMem32(0x004DBBB8,0x3F9947AE)

--00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 00 3F 00 00 80 3F 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80 BF 00 00 80 BF 00 00 80 BF 00 00 80 BF 00 00 00 00
eeObj.WriteMem32(0x004DBBA8,0x3F9947AE)

--00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 3F 00 00 00 00 00 00 80 3F 00 00 00 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 00 3F 00 00 80 3F 00 00 00 00 00 00 00 00 00 00 00 00
eeObj.WriteMem32(0x004DBB88,0xBE4A3D71)

--00 00 00 00 00 00 80 3F 00 00 00 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 00 3F 00 00 80 3F 00 00 00 00 00 00 00 00 00 00 00 00
eeObj.WriteMem32(0x004DBB98,0xBE4A3D71)

--00 00 20 44 00 00 70 42 CD CC CC 3A 89 88 88 3C
eeObj.WriteMem32(0x004EEB20,0x44555555)

--00 00 20 44 00 00 70 42 00 00 00 00 00 00 00 00 00 00 20 44 00 00 00 40 00 00 00 00 00 00 D2 43
eeObj.WriteMem32(0x004EEB00,0x44555555)

--00 00 20 44 00 00 00 40 00 00 00 00 00 00 D2 43
eeObj.WriteMem32(0x004EEB10,0x44555555)

--00 00 00 00 00 00 00 00 00 00 20 44 00 00 70 42 00 00 00 00 00 00 00 00 00 00 20 44 00 00 00 40
eeObj.WriteMem32(0x004EEAF8,0xc2d70000)

--00 00 00 00 00 00 D2 43 00 00 20 44 00 00 70 42
eeObj.WriteMem32(0x004EEB18,0xc2d70000)

--20 44 02 3C 70 00 A0 AF 68 00 A2 AF 70 00 A6 27
eeObj.WriteMem32(0x003d78c8,0x3C024456)



----------------------------------

--70 00 A1 C7 74 00 A0 C7 00 00 A1 E4 04 00 A0 E4
eeObj.WriteMem32(0x003d774c,0x081217b0)
eeObj.WriteMem32(0x00485EC0,0x3C08C2D7)
eeObj.WriteMem32(0x00485EC4,0x44880800)

eeObj.WriteMem32(0x00485EC8,0x080f5dd4)

--50 00 A2 C7 54 00 A0 C7 81 20 02 46 01 08 00 46
eeObj.WriteMem32(0x003d7984,0x081217b3)
eeObj.WriteMem32(0x00485ECC,0x3C19C2D7)
eeObj.WriteMem32(0x00485ED0,0x44991000)
eeObj.WriteMem32(0x00485ED4,0x080f5e62)

--20 44 02 3C A8 00 A0 AF A0 00 A2 AF 2D 28 00 00
eeObj.WriteMem32(0x001a172c,short,4456 -- HUD Render Width (Player 1) -- 16:9 = 854

--20 44 02 3C 98 00 A0 AF 90 00 A2 AF A8 00 A3 C7
eeObj.WriteMem32(0x001A1790,short,4456 -- HUD Render Width (Player 2) -- 16:9 = 854



------------------------------------------------/

--A0 00 A2 AF 2D 28 00 00 70 43 02 3C AC 00 A0 AF
eeObj.WriteMem32(0x001A1734,0x081217f2)
eeObj.WriteMem32(0x00485FC8,0xAfA200A0)
eeObj.WriteMem32(0x00485FD0,0x3C02C2D7)
eeObj.WriteMem32(0x00485FD4,0xAFA200A8)
eeObj.WriteMem32(0x00485FD8,0x080685ce)

--90 00 A2 AF A8 00 A3 C7 70 43 02 3C 2D 28 00 00
eeObj.WriteMem32(0x001A1798,0x081217f6)
eeObj.WriteMem32(0x00485FD8,0xAFA20090)
eeObj.WriteMem32(0x00485FDC,0x3C02C2D7)
eeObj.WriteMem32(0x00485FE0,0xAFA20098)
eeObj.WriteMem32(0x00485FE4,0x080685e7)

--20 44 02 3C 2D 50 00 00 00 10 82 44 00 00 00 00
eeObj.WriteMem32(0x00134f5c,short,4456 -- "Get Ready! GO" Width -- 16:9 = 854

--74 01 A2 AF 00 00 B0 FF
eeObj.WriteMem32(0x00134F34,0x081217ee)
eeObj.WriteMem32(0x00485FB8,0xAFA20174)
eeObj.WriteMem32(0x00485FBC,0x3C023EC0)
eeObj.WriteMem32(0x00485FC0,0xAFA20168)
eeObj.WriteMem32(0x00485FC4,0x0804d3ce)


-- Menus (16:9)

--b401848c 20 44 03 3C 00 28 83 44
eeObj.WriteMem32(0x0030d664,short,43F0 -- Menu Width -- 16:9 = 480

--08 00 83 E4 0C 00 80 E4 E0 B1 63 90 48 00 A3 E7
--6148033c 60088046 00008344 (ELF)
eeObj.WriteMem32(0x0030d6b4,0x081217b6)
eeObj.WriteMem32(0x00485ED8,0xE4830008)
eeObj.WriteMem32(0x00485EDC,0x3C1942A0)
eeObj.WriteMem32(0x00485EE0,0x44991800)
eeObj.WriteMem32(0x00485EE4,0xE4830000)
eeObj.WriteMem32(0x00485EE8,0x080c35ae)

--00 00 20 44 00 00 B0 43 00 00 00 00 00 00 00 00 00 00 80 3F 00 00 00 00 00 00 00 00 0F 09 44 42
eeObj.WriteMem32(0x004F5A30,0x44555555)

--00 00 00 00 00 00 80 42 00 00 20 44 00 00 B0 43 00 00 00 00 00 00 00 00 00 00 80 3F 00 00 00 00
eeObj.WriteMem32(0x004F5A28,0xC2D70000)

--20 44 03 3C 2D A8 80 00 E9 01 10 3C 67 00 14 3C
-- 2044033c (elf 2nd from top)
eeObj.WriteMem32(0x0031b030,short,4456 -- Top Border Width -- 16:9 = 854

--04 00 85 C4 6A 18 E1 4B D8 01 A2 FF 00 08 83 44
eeObj.WriteMem32(0x0031B0A4,0x081217bb)
eeObj.WriteMem32(0x00485EEC,0x3C190000)
eeObj.WriteMem32(0x00485EF0,0x44993800)
eeObj.WriteMem32(0x00485EF4,0xE4870000)
eeObj.WriteMem32(0x00485EF8,0xC4850004)
eeObj.WriteMem32(0x00485EFC,0x080c6c2a)

--20 44 02 3C 78 00 A0 AF 70 00 A2 AF 78 00 A6 27
eeObj.WriteMem32(0x0038B380,short,4456 -- Bottom Border Width -- 16:9 = 854

--20 44 02 3C 60 00 A0 AF 58 00 A2 AF 68 00 A5 27
eeObj.WriteMem32(0x0038B3B8,short,4456 -- Bottom Border Width -- 16:9 = 854

--68 00 A0 AF 5C 00 A2 AF 60 00 A6 27 80 3F 02 3C
eeObj.WriteMem32(0x0038B3CC,0x081217c0)
eeObj.WriteMem32(0x00485F00,0x3C19C2D7)
eeObj.WriteMem32(0x00485F04,0xAFB90068)
eeObj.WriteMem32(0x00485F08,0x080e2cf4)

--78 00 A0 AF 70 00 A2 AF 78 00 A6 27 C0 42 02 3C
eeObj.WriteMem32(0x0038B384,0x081217c3)
eeObj.WriteMem32(0x00485F0C,0x3C193E00)
eeObj.WriteMem32(0x00485F10,0xAFB90078)
eeObj.WriteMem32(0x00485F14,0x080e2ce2)

--20 44 02 3C 4C 00 0A 3C 08 01 A2 AF 4C 00 0B 3C
eeObj.WriteMem32(0x0031D594,short,4456 -- Checkerboard Width -- 16:9 = 854

--20 44 02 3C EA 01 0A 3C F0 00 A2 AF EA 01 0B 3C
eeObj.WriteMem32(0x0031D5EC,short,4456 -- Checkerboard Width -- 16:9 = 854

--20 44 02 3C 4C 00 08 3C C0 00 A2 AF 4C 00 09 3C
eeObj.WriteMem32(0x0031D698,short,4456 -- Checkerboard Width -- 16:9 = 854

--20 44 02 3C EA 01 0A 3C D8 00 A2 AF EA 01 0B 3C
eeObj.WriteMem32(0x0031D640,short,4456 -- Checkerboard Width -- 16:9 = 854

--20 44 02 3C EA 01 08 3C A8 00 A2 AF EA 01 09 3C
eeObj.WriteMem32(0x0031D6F0,short,4456 -- Checkerboard Width -- 16:9 = 854


--------------------------------------------------------/

--10 01 A0 AF 0C 01 A2 AF 18 01 A5 27 C0 42 02 3C
eeObj.WriteMem32(0x0031D5A8,0x081217c6)
eeObj.WriteMem32(0x00485F18,0x3C193E00)
eeObj.WriteMem32(0x00485F1C,0xAFB90110)
eeObj.WriteMem32(0x00485F20,0x080c756b)

--F8 00 A0 AF F4 00 A2 AF 00 01 A5 27 FC 00 A0 AF
eeObj.WriteMem32(0x0031D600,0x081217c9)
eeObj.WriteMem32(0x00485F24,0x3C193E00)
eeObj.WriteMem32(0x00485F28,0xAFB900F8)
eeObj.WriteMem32(0x00485F2C,0x080c7581)

--C8 00 A0 AF C4 00 A2 AF D0 00 A5 27 80 42 02 3C
eeObj.WriteMem32(0x0031D6AC,0x081217cc)
eeObj.WriteMem32(0x00485F30,0x3C193E00)
eeObj.WriteMem32(0x00485F34,0xAFB900C8)
eeObj.WriteMem32(0x00485F38,0x080c75ac)

--E0 00 A0 AF DC 00 A2 AF 10 01 88 26 D0 43 02 3C
eeObj.WriteMem32(0x0031D654,0x081217cf)
eeObj.WriteMem32(0x00485F3C,0x3C193E00)
eeObj.WriteMem32(0x00485F40,0xAFB900E0)
eeObj.WriteMem32(0x00485F44,0x080c7596)

--B0 00 A0 AF AC 00 A2 AF 06 A3 00 46 C0 43 02 3C
eeObj.WriteMem32(0x0031D704,0x081217d2)
eeObj.WriteMem32(0x00485F48,0x3C193E00)
eeObj.WriteMem32(0x00485F4C,0xAFB900B0)
eeObj.WriteMem32(0x00485F50,0x080c75c2)

--20 44 02 3C D0 01 A0 AF C8 01 A2 AF D8 01 A5 27
eeObj.WriteMem32(0x0031D8D0,short,4456 -- Loading Background Width -- 16:9 = 854 #
eeObj.WriteMem32(0x0031D8F0,0x081217d5)
eeObj.WriteMem32(0x00485F54,0x3C19C2D7)
eeObj.WriteMem32(0x00485F58,0xAFB901D8)
eeObj.WriteMem32(0x00485F5C,0x080c763d)

--20 44 02 3C 70 00 A0 AF 68 00 A2 AF 78 00 A5 27
eeObj.WriteMem32(0x003A6F84,short,4456 -- Replay Top Bar Width -- 16:9 = 854 #
eeObj.WriteMem32(0x003A6F88,0x081217e8)
eeObj.WriteMem32(0x00485FA0,0x3C19C2D7)
eeObj.WriteMem32(0x00485FA4,0xAFB90078)
eeObj.WriteMem32(0x00485FA8,0x080e9be3)

--20 44 02 3C 58 00 A0 AF 50 00 A2 AF 5C 00 B4 E7
eeObj.WriteMem32(0x003A6FC8,short,4456 -- Replay Bottom Bar Width -- 16:9 = 854 #
eeObj.WriteMem32(0x003A6FDC,0x081217eb)
eeObj.WriteMem32(0x00485FAC,0x3C19C2D7)
eeObj.WriteMem32(0x00485FB0,0xAFB90060)
eeObj.WriteMem32(0x00485FB4,0x080e9bf8)

--AB AA AA 3F 55 55 D5 3F E4 CB 16 41 9A 99 99 BE
eeObj.WriteMem32(0x00505118,0x3FE38E39)

--AB AA 8A 3F
eeObj.WriteMem32(0x00504F8C,0x3FB8E38F)
end

emuObj.AddVsyncHook(widescreen)