apiRequest(1.0)
local eeObj = getEEObject()
local emuObj = getEmuObject()

local widescreen = function()
--comment=Widescreen Hack (16:9) by Aero_ (NTSC-K by Arapapa)



-- FOV (16:9)

--00 00 00 70 82 48 00 00 1D 49 00 80 66 49 00 00
eeObj.WriteMem32(0x006661CD,byte,01 -- enables widescreen FOV values

--9A 99 99 3F CE CC 4C 3E CD CC 4C 3F C8 CC CC 3D
eeObj.WriteMem32(0x004E0D38,0x3FAAAAAB)

--39 8E E3 3F 00 80 0E 43 EF EE 6E 3E 29 5C CF 3F
eeObj.WriteMem32(0x004E0F70,0x3FE38E39)

--29 5C CF 3F 39 8E 63 40 CD CC AC 3F
eeObj.WriteMem32(0x004E0F7C,0x3FE38E39)

--39 8E 63 40 CD CC AC 3F AB AA 2A 40
eeObj.WriteMem32(0x004E0F80,0x40638E39)

-- HUD (16:9)
--CD CC CC 3A 89 88 08 3B 9A 99 01 C1
eeObj.WriteMem32(0x004E135C,0x3A99999A)

--00 00 00 00 00 00 00 00 00 00 80 3F EF EE 6E 3F (1st)
eeObj.WriteMem32(0x006685B0,0x42A00000)

--00 00 00 00 00 00 00 00 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 00 00 00 00 00 00 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 54 A4 66 00 00 00 00 00 00 00 00 00 54 A4 66 00
eeObj.WriteMem32(0x00669E30,0x42A00000)

--00 00 80 3F 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80 BF 00 00 80 BF 00 00 80 BF 00 00 80 BF 00 00 00 00
eeObj.WriteMem32(0x004B7A38,0x3F9947AE)

--00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 00 3F 00 00 80 3F 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 80 BF 00 00 80 BF 00 00 80 BF 00 00 80 BF 00 00 00 00
eeObj.WriteMem32(0x004B7A28,0x3F9947AE)

--00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 3F 00 00 00 00 00 00 80 3F 00 00 00 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 00 3F 00 00 80 3F 00 00 00 00 00 00 00 00 00 00 00 00
eeObj.WriteMem32(0x004B7A08,0xBE4A3D71)

--00 00 00 00 00 00 80 3F 00 00 00 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 80 3F 00 00 00 3F 00 00 80 3F 00 00 00 00 00 00 00 00 00 00 00 00
eeObj.WriteMem32(0x004B7A18,0xBE4A3D71)

--00 00 20 44 00 00 70 42 CD CC CC 3A 89 88 88 3C
eeObj.WriteMem32(0x004CA9C0,0x44555555)

--00 00 20 44 00 00 70 42 00 00 00 00 00 00 00 00 00 00 20 44 00 00 00 40 00 00 00 00 00 00 D2 43
eeObj.WriteMem32(0x004CA9A0,0x44555555)

--00 00 20 44 00 00 00 40 00 00 00 00 00 00 D2 43
eeObj.WriteMem32(0x004CA9B0,0x44555555)

--00 00 00 00 00 00 00 00 00 00 20 44 00 00 70 42 00 00 00 00 00 00 00 00 00 00 20 44 00 00 00 40
eeObj.WriteMem32(0x004CA998,0xc2d70000)

--00 00 00 00 00 00 D2 43 00 00 20 44 00 00 70 42
eeObj.WriteMem32(0x004CA9B8,0xc2d70000)

--20 44 02 3C 70 00 A0 AF 68 00 A2 AF 70 00 A6 27 (search elf)
eeObj.WriteMem32(0x003D7498,0x3C024456)



----------------------------------

--70 00 A1 C7 74 00 A0 C7 00 00 A1 E4 04 00 A0 E4
eeObj.WriteMem32(0x003D731C,0x081216f0)
eeObj.WriteMem32(0x00485BC0,0x3C08C2D7)
eeObj.WriteMem32(0x00485BC4,0x44880800)

eeObj.WriteMem32(0x00485BC8,0x080f5cc8)

--50 00 A2 C7 54 00 A0 C7 81 20 02 46 01 08 00 46
eeObj.WriteMem32(0x003D7554,0x081216f3)
eeObj.WriteMem32(0x00485BCC,0x3C19C2D7)
eeObj.WriteMem32(0x00485BD0,0x44991000)
eeObj.WriteMem32(0x00485BD4,0x080f5d56)

--20 44 02 3C A8 00 A0 AF A0 00 A2 AF 2D 28 00 00
eeObj.WriteMem32(0x001A172C,short,4456 -- HUD Render Width (Player 1) -- 16:9 = 854

--20 44 02 3C 98 00 A0 AF 90 00 A2 AF A8 00 A3 C7
eeObj.WriteMem32(0x001A1790,short,4456 -- HUD Render Width (Player 2) -- 16:9 = 854



------------------------------------------------/

--A0 00 A2 AF 2D 28 00 00 70 43 02 3C AC 00 A0 AF
eeObj.WriteMem32(0x001A1734,0x08121732)
eeObj.WriteMem32(0x00485CC8,0xAfA200A0)
eeObj.WriteMem32(0x00485CCC,0x3C02C2D7)
eeObj.WriteMem32(0x00485CD0,0xAFA200A8)
eeObj.WriteMem32(0x00485CD4,0x080685ce)

--90 00 A2 AF A8 00 A3 C7 70 43 02 3C 2D 28 00 00
eeObj.WriteMem32(0x001A1798,0x08121736)
eeObj.WriteMem32(0x00485CD8,0xAFA20090)
eeObj.WriteMem32(0x00485CDC,0x3C02C2D7)
eeObj.WriteMem32(0x00485CE0,0xAFA20098)
eeObj.WriteMem32(0x00485CE4,0x080685e7)

--20 44 02 3C 2D 50 00 00 00 10 82 44 00 00 00 00
eeObj.WriteMem32(0x00134EEC,short,4456 -- "Get Ready! GO" Width -- 16:9 = 854

--74 01 A2 AF 00 00 B0 FF
eeObj.WriteMem32(0x00134F34,0x0812172e)
eeObj.WriteMem32(0x00485CB8,0xAFA20174)
eeObj.WriteMem32(0x00485CBC,0x3C023EC0)
eeObj.WriteMem32(0x00485CC0,0xAFA20168)
eeObj.WriteMem32(0x00485CC4,0x0804d3ce)


----------------------------------------------------

-- Menus (16:9)

--20 44 03 3C 00 28 83 44 66 00 03 3C C0 5E 64 C4
eeObj.WriteMem32(0x0030D624,short,43F0 -- Menu Width -- 16:9 = 480

--08 00 83 E4 0C 00 80 E4 E0 B1 63 90 48 00 A3 E7
--6148033c 60088046 00008344 (ELF)
eeObj.WriteMem32(0x0030d674,0x081216f6)
eeObj.WriteMem32(0x00485BD8,0xE4830008)
eeObj.WriteMem32(0x00485BDC,0x3C1942A0)
eeObj.WriteMem32(0x00485BE0,0x44991800)
eeObj.WriteMem32(0x00485BE4,0xE4830000)
eeObj.WriteMem32(0x00485BE8,0x080c359e)

--00 00 20 44 00 00 B0 43 00 00 00 00 00 00 00 00 00 00 80 3F 00 00 00 00 00 00 00 00 0F 09 44 42
eeObj.WriteMem32(0x004D18D0,0x44555555)

--00 00 00 00 00 00 80 42 00 00 20 44 00 00 B0 43 00 00 00 00 00 00 00 00 00 00 80 3F 00 00 00 00
eeObj.WriteMem32(0x004D18C8,0xC2D70000)

--20 44 03 3C 2D A8 80 00 E9 01 10 3C 67 00 14 3C
-- 2044033c (elf 2nd from top)
eeObj.WriteMem32(0x0031afc0,short,4456 -- Top Border Width -- 16:9 = 854

--04 00 85 C4 6A 18 E1 4B D8 01 A2 FF 00 08 83 44
eeObj.WriteMem32(0x0031B034,0x081216fb)
eeObj.WriteMem32(0x00485BEC,0x3C190000)
eeObj.WriteMem32(0x00485BF0,0x44993800)
eeObj.WriteMem32(0x00485BF4,0xE4870000)
eeObj.WriteMem32(0x00485BF8,0xC4850004)
eeObj.WriteMem32(0x00485BFC,0x080c6c0e)

--20 44 02 3C 78 00 A0 AF 70 00 A2 AF 78 00 A6 27
eeObj.WriteMem32(0x0038b030,short,4456 -- Bottom Border Width -- 16:9 = 854

--20 44 02 3C 60 00 A0 AF 58 00 A2 AF 68 00 A5 27
eeObj.WriteMem32(0x0038b068,short,4456 -- Bottom Border Width -- 16:9 = 854

--68 00 A0 AF 5C 00 A2 AF 60 00 A6 27 80 3F 02 3C
eeObj.WriteMem32(0x0038b07c,0x08121700)
eeObj.WriteMem32(0x00485C00,0x3C19C2D7)
eeObj.WriteMem32(0x00485C04,0xAFB90068)
eeObj.WriteMem32(0x00485C08,0x080e2c20)

--78 00 A0 AF 70 00 A2 AF 78 00 A6 27 C0 42 02 3C
eeObj.WriteMem32(0x0038b034,0x08121703)
eeObj.WriteMem32(0x00485C0C,0x3C193E00)
eeObj.WriteMem32(0x00485C10,0xAFB90078)
eeObj.WriteMem32(0x00485C14,0x080e2c0e)

--20 44 02 3C 4C 00 0A 3C 08 01 A2 AF 4C 00 0B 3C
eeObj.WriteMem32(0x0031D524,short,4456 -- Checkerboard Width -- 16:9 = 854

--20 44 02 3C EA 01 0A 3C F0 00 A2 AF EA 01 0B 3C
eeObj.WriteMem32(0x0031D57C,short,4456 -- Checkerboard Width -- 16:9 = 854

--20 44 02 3C 4C 00 08 3C C0 00 A2 AF 4C 00 09 3C
eeObj.WriteMem32(0x0031D628,short,4456 -- Checkerboard Width -- 16:9 = 854

--20 44 02 3C EA 01 0A 3C D8 00 A2 AF EA 01 0B 3C
eeObj.WriteMem32(0x0031D5D0,short,4456 -- Checkerboard Width -- 16:9 = 854

--20 44 02 3C EA 01 08 3C A8 00 A2 AF EA 01 09 3C
eeObj.WriteMem32(0x0031D680,short,4456 -- Checkerboard Width -- 16:9 = 854

--------------------------------------------------------/

--10 01 A0 AF 0C 01 A2 AF 18 01 A5 27 C0 42 02 3C
eeObj.WriteMem32(0x0031D538,0x08121706)
eeObj.WriteMem32(0x00485C18,0x3C193E00)
eeObj.WriteMem32(0x00485C1c,0xAFB90110)
eeObj.WriteMem32(0x00485C20,0x080c754f)

--F8 00 A0 AF F4 00 A2 AF 00 01 A5 27 FC 00 A0 AF
eeObj.WriteMem32(0x0031D590,0x08121709)
eeObj.WriteMem32(0x00485C24,0x3C193E00)
eeObj.WriteMem32(0x00485C28,0xAFB900F8)
eeObj.WriteMem32(0x00485C2C,0x080c7565)

--C8 00 A0 AF C4 00 A2 AF D0 00 A5 27 80 42 02 3C
eeObj.WriteMem32(0x0031D63C,0x0812170c)
eeObj.WriteMem32(0x00485C30,0x3C193E00)
eeObj.WriteMem32(0x00485C34,0xAFB900C8)
eeObj.WriteMem32(0x00485C38,0x080c7590)

--E0 00 A0 AF DC 00 A2 AF 10 01 88 26 D0 43 02 3C
eeObj.WriteMem32(0x0031D5E4,0x0812170f)
eeObj.WriteMem32(0x00485C3C,0x3C193E00)
eeObj.WriteMem32(0x00485C40,0xAFB900E0)
eeObj.WriteMem32(0x00485C44,0x080c757a)

--B0 00 A0 AF AC 00 A2 AF 06 A3 00 46 C0 43 02 3C
eeObj.WriteMem32(0x0031D694,0x08121712)
eeObj.WriteMem32(0x00485C48,0x3C193E00)
eeObj.WriteMem32(0x00485C4C,0xAFB900B0)
eeObj.WriteMem32(0x00485C50,0x080c75a6)

--20 44 02 3C D0 01 A0 AF C8 01 A2 AF D8 01 A5 27
eeObj.WriteMem32(0x0031D860,short,4456 -- Loading Background Width -- 16:9 = 854 #
eeObj.WriteMem32(0x0031D880,0x08121715)
eeObj.WriteMem32(0x00485C54,0x3C19C2D7)
eeObj.WriteMem32(0x00485C58,0xAFB901D8)
eeObj.WriteMem32(0x00485C5C,0x080c7621)

--20 44 02 3C 70 00 A0 AF 68 00 A2 AF 78 00 A5 27
eeObj.WriteMem32(0x003A6BB4,short,4456 -- Replay Top Bar Width -- 16:9 = 854 #
eeObj.WriteMem32(0x003A6BB8,0x08121728)
eeObj.WriteMem32(0x00485CA0,0x3C19C2D7)
eeObj.WriteMem32(0x00485CA4,0xAFB90078)
eeObj.WriteMem32(0x00485CA8,0x080e9aef)

--20 44 02 3C 58 00 A0 AF 50 00 A2 AF 5C 00 B4 E7
eeObj.WriteMem32(0x003A6BF8,short,4456 -- Replay Bottom Bar Width -- 16:9 = 854 #
eeObj.WriteMem32(0x003A6C0C,0x0812172b)
eeObj.WriteMem32(0x00485CAC,0x3C19C2D7)
eeObj.WriteMem32(0x00485CB0,0xAFB90060)
eeObj.WriteMem32(0x00485CB4,0x080e9b04)

--AB AA AA 3F 55 55 D5 3F E4 CB 16 41 9A 99 99 BE
eeObj.WriteMem32(0x004E0F3C,0x3FE38E39)

--AB AA 8A 3F
eeObj.WriteMem32(0x004E0D94,0x3FB8E38F)
end

emuObj.AddVsyncHook(widescreen)